<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- ================================================= -->
  <!-- Load robot dimensions from YAML                  -->
  <!-- ================================================= -->
  <xacro:property name="dims"
    value="${xacro.load_yaml('$(find hamals_robot_description)/config/robot_dimensions.yaml')}" />

  <!-- Wheel parameters -->
  <xacro:property name="wheel_radius"    value="${dims['wheels']['radius']}"/>
  <xacro:property name="wheel_thickness" value="${dims['wheels']['thickness']}"/>
  <xacro:property name="wheel_sep"       value="${dims['wheels']['separation']}"/>

  <!-- ================================================= -->
  <!-- LEFT WHEEL                                       -->
  <!-- ================================================= -->
  <link name="left_wheel_link">
    <visual>
      <!-- Rotate cylinder so axis aligns with wheel axle -->
      <origin xyz="0 0 0" rpy="1.5708 0 0"/>
      <geometry>
        <cylinder radius="${wheel_radius}" length="${wheel_thickness}"/>
      </geometry>
      <material name="wheel_red"/>
    </visual>
  </link>

  <joint name="left_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="left_wheel_link"/>

    <!-- y = +wheel_sep/2 , z = -wheel_radius -->
    <origin xyz="0 ${wheel_sep / 2.0} ${-wheel_radius}"/>
    <axis xyz="1 0 0"/>
  </joint>

  <!-- ================================================= -->
  <!-- RIGHT WHEEL                                      -->
  <!-- ================================================= -->
  <link name="right_wheel_link">
    <visual>
      <origin xyz="0 0 0" rpy="1.5708 0 0"/>
      <geometry>
        <cylinder radius="${wheel_radius}" length="${wheel_thickness}"/>
      </geometry>
      <material name="wheel_red"/>
    </visual>
  </link>

  <joint name="right_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="right_wheel_link"/>

    <!-- y = -wheel_sep/2 , z = -wheel_radius -->
    <origin xyz="0 ${-wheel_sep / 2.0} ${-wheel_radius}"/>
    <axis xyz="1 0 0"/>
  </joint>

</robot>